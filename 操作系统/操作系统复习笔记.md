---

---

# 操作系统复习笔记

## 第一章 操作系统引论

1.  
   * 并发
   * 共享
   * 虚拟
   * 异步

## 第二章 进程的描述与控制

1. 进程定义

   * 进程是程序的一次执行
   * 进程是一个程序机器数据在处理机上顺序执行所发生的活动
   * 进程是具有独立功能的程序在一个数据集合上运行的过程，它是系统进行资源分配和调度的一个独立单位

2. 进程状态

   * 三种基本状态

     * 继续
     * 执行
     * 阻塞

     

     ![image-20240613122921267](../imgaes/image-20240613122921267.png)

   * 引入挂起操作的三个进程的转换     
   
   * #
   
   ### 2.3 进程同步
   
   #### 2.3.2 信号量机制
   
   1. 整形信号量
      存在问题：不满足“让权等待”，发生“忙等”。
   2. 记录型机制
   
   
   
   

## 第三章 处理机调度与死锁

### 3.1 处理机调度的基本概念

* 高级调度：==将作业从外存调入内存==，一般用于批处理系统，分/实时系统一般直接入内存
* 低级调度(进程调度)：由分派程序为为作业分派处理机
  * 非抢占式
  * 抢占方式
    * 时间片原则
    * 优先权原则
    * 短作业优先原则
* 中级调度：提高内存利用率和系统吞吐量而引入的内外存对换功能

==**调度算法的若干准则**==

![e57afade0466ee3cf307f95a2c19b6d](../imgaes/e57afade0466ee3cf307f95a2c19b6d.png)

### 3.2 调度算法

#### 3.2.1 先来先服务和短作业（进程）优先调度算法

* FCFS：简单、利于长作业
* SJ(P)F：降低了平均周转时间和平均带权周转时间(提高了系统吞吐量)、对长作业不利、估计时间不易确定

#### 3.2.2 高优先权优先调度算法

1. **优先权调度算法类型**
   * 非抢占式优先权算法
   * 抢占式优先权算法
2. **优先权类型**
   * 静态优先权：进程优先权在整个运行期间不变
   * 动态优先权：优先权随着执行时间而下降、随等待时间而升高
     * ==相应比 R<sub>p</sub> = （等待时间 + 已服务时间）/ 已服务时间==
   * 高相应比优先算法（HRN  ）：
     * 相应比 = （等待时间+要求 服务时间 ）/ 要求服务时间

#### 3.2.3 基于时间片的轮转调度算法

### 3.3 实时调度

#### 3.3.2 实时调度算法的分类

1. 非抢占式调度算法
   * 时间片轮转
   * 非抢占式优先权
2. 抢占式调度算法
   * 时钟中断抢占优先权
   * 立即抢占



#### 3.3.3 常用的几种实时调度算法

1. **最早截止时间优先EDF**
   * 根据任务的开始截止时间来确定任务的优先级
   * 截止时间越早，优先级越高
   * 可以是抢占式或非抢占式
2. **最低松弛度优先LLF算法**
   * 松弛度：根据任务紧急程度，来确定优先级
   * ==松弛程度 = 完成截止时间 - 处理时间 - 当前时间==
   * 主要用于抢占式的调度方式



## 第四章 存储器管理

### 4.2 连续分配方式----分区式连续分配----可变式分区

#### 分配算法：

1. 首次适应算法
2. 循环首次适应算法
3. 最佳适应算法

#### 回收算法

![image-20240617032102314](D:/c plus plus/images/image-20240617032102314.png)

### 4.3 基本分页存储管理

####4.3.2 地址变换机构

基本任务：逻辑地址 ----- 物理地址的映射

发生了2次访存

1. 根据页面访问页表
2. 根据物理地址进行读/写操作

### 4.4 基本分段存储管理

![image-20240617105121352](D:/c plus plus/images/image-20240617105121352.png)

**段式管理的优缺点**

优点：

1. 程序的各段可独立编译
2. 可采用不同的保护措施
3. 便于共享某些段

缺点：

1. 段长受限制
2. 段是作为一个整体调入调出，操作时间长

#### 4.4.4 段页式存储管理方案



## 第五章 虚拟存储器

### 5.2 请求分页存储管理方案

与基本分页存储管理的主要区别：

* 操作系统提供请求调页功能
* 页面置换功能

### 页面置换算法

* **最佳置换算法（OPT）**：往后寻找，最后一个出现的页号就是要淘汰的页面

* **先进先出置换算法（FIFO）**

* **最近最久未使用置换算法（LRU）**：逆向检查，最后一个出现的页号就是要淘汰的页面

* **时钟置换算法**（CLOCK）：
  ![image-20240617134556872](D:/c plus plus/images/image-20240617134556872.png)

* **改进型的时钟置换算法**：优先淘汰没有被修改过的页面

  ![image-20240617135325757](D:/c plus plus/images/image-20240617135325757.png)

* ![image-20240617135407557](D:/c plus plus/images/image-20240617135407557.png)

## 第六章 输入输出系统

### 6.1 I/O系统

### 6.2 I/O控制方式

程序 I/ O ---- 中断 I / O ---- DMA控制 ---- 通道控制

趋势：减少CPU对I/O操作的干预程度，提高并行度

1. **程序I/O方式**

   ![image-20240617155733309](D:/c plus plus/images/image-20240617155733309.png)

2. **中断I/O方式**

![image-20240617155840825](D:/c plus plus/images/image-20240617155840825.png)

3. DMA（直接存储器存取）方式

![image-20240617155954848](D:/c plus plus/images/image-20240617155954848.png)

4. **通道控制方式**

![image-20240617160604326](D:/c plus plus/images/image-20240617160604326.png)





![image-20240617160645026](D:/c plus plus/images/image-20240617160645026.png)



### 6.4 设备分配

#### SPOOLing技术（假脱机技术）

当系统引入了多道程序技术后，完全可以利用其中一道程序，来模拟脱机输入时的外围控制机功能，把低速I/O设备上的数据传送到高速磁盘上。再用另一道程序，模拟脱机输出时的外围控制机的功能，把数据从磁盘传送到低速输出设备上。这样，便可在主机的直接控制下，实现以前的脱机输入、输出功能。

此时的外围操作与cpu对数据的处理同时进行，把这种在联机情况下实现的同时外围操作的技术，成为SPOOLing技术。

**技术特点：**

* 提高了I/O的速度
* 将独占设备改造为共享设备
* 实现了虚拟设备功能

![image-20240617162142626](D:/c plus plus/images/image-20240617162142626.png)





### 6.6 磁盘存储器管理

#### 6.6.1  磁盘结构

* 磁盘、磁道、扇区的概念
* 如何在磁盘中读/写数据：磁头移动到目标位置，盘片旋转，对应扇区划过磁道才能完成读/写
* 盘面、柱面的概念
* 磁盘的物理地址：（柱面号，盘面号，扇区号）
* 磁盘的分类

#### 6.6.2 磁盘调度算法

* **一次磁盘读/写操作需要的时间**

  * *寻找时间T<sub>s</sub>*：在读/写数据之前，将磁头移动到指定磁道所花费的时间

    * 启动磁头臂，假设耗时为s;
    * 移动磁头。假设磁头匀速移动，没跨越一个磁道耗时为m，总共跨越n条磁道，则：
      * T<sub>s</sub> = s + m * n;

  * *延迟时间*T<sub>r</sub>：定位扇区

    * 设磁盘转速为r(单位为秒/转)，则
      * T<sub>r</sub> = 1 /2 r

  * *传输时间*T<sub>t</sub>：从磁盘读出或向读盘写入数据所经历的时间，
    ![image-20240617164244455](D:/c plus plus/images/image-20240617164244455.png)

    总的平均存取时间：Ta = 三个加起来

* **磁盘调度算法**
  * 先来先服务（FCFS）：根据进程请求访问的磁盘先后顺序进行调度
    **优点**：公平；请求访问的磁道比较集中的话，算法性能适中
    **缺点**：请求访问的磁道很分散，性能很差
  * 最短寻找时间优先（SSTF）：优先处理与当前磁头最近的磁道。
    **优点**：性能较好。平均寻道时间短。
    **缺点**：可能产生饥饿现象
  * 扫描算法（SCAN）：只有磁头移动到最外侧磁道的时候才能往内移动，移动到最内侧磁道才能往外移动
    **优点**：性能较好，平均寻道时间较短，不会产生饥饿现象
    **缺点**：只有到达最边上的磁道才能改变磁头移动方向、对各个位置的磁道的响应频率不平均
  * 循环扫描算法（C-SCAN）：在磁头移动方向上已经没有别的请求，可以立即改变磁头方向
    **优点**：比起SCAN算法，对于各个位置的磁道的响应频率很平均
    **缺点**：只有到达最边上的磁道才能改变磁头移动方向
  * 

## 第七章 文件管理

### 7.2 文件的逻辑结构

* 无结构文件

* 有结构文件

  * 顺序文件

  ![image-20240618020817691](D:/c plus plus/images/image-20240618020817691.png)

  * 索引文件

  ![image-20240618021006791](D:/c plus plus/images/image-20240618021006791.png)

  * 索引顺序文件

### 7.2 文件目录

* 文件控制块（实现文件目录的关键数据结构）

![image-20240618021650159](D:/c plus plus/images/image-20240618021650159.png)



* 目录结构
  * 单级目录结构
  * 两级目录结构
  * 多级目录结构
  * 无环图目录结构
* 索引节点

### 7.4 文件共享

* 基于索引节点的共享方式：在
* 基于符号链的共享方式

![image-20240618023644444](D:/c plus plus/images/image-20240618023644444.png)

## 第八章 磁盘存储器管理

### 8.1 外存的组织方式

文件的物理结构：

* 连续分配
* 链接分配
  * 隐式链接
  * 显式链接
* 索引分配

#### 8.1.1 连续组织方式：要求文件在磁盘上占有一组连续的块

**优点**：顺序访问容易；访问速度最快

**缺点**：不方便文件拓展，存储空间利用率低、产生磁盘碎片

#### 8.1.2 链接组织方式：采取离散分配

隐式链接：

![image-20240617171721869](D:/c plus plus/images/image-20240617171721869.png)

优点：方便文件拓展，不会有碎片问题、外村利用率高

缺点：只支持顺序访问，不支持随机访问，查找效率低

####8.1.2 显式链接（把用于链接文件各物理块的指针显示的存放在一个表，即文件分配表FAT）

一个磁盘只会建立一张表，开机时文件分配表放入内存。

**优点**：支持随机访问、方便文件拓展、不会由碎片问题、外村利用率高，相比于链式链接来说，地址转换时不需要访问磁盘，因此访问效率更高

缺点：文件分配表需要占用一定存储空间

#### 8.1.3 索引组织方式

索引分配允许文件离散的分配在各个磁盘块中，系统会为每个文件建立一个索引表，索引表中记录了文件的各个逻辑块对应的物理块。

* ·链接方案：如果索引表太大，可以将多个索引表链接起来存放

![image-20240617181646673](D:/c plus plus/images/image-20240617181646673.png)

* 多层索引：建立多层索引。

![image-20240617181803917](D:/c plus plus/images/image-20240617181803917.png)

* 混合索引

![image-20240617181852125](D:/c plus plus/images/image-20240617181852125.png)



![image-20240617181932480](D:/c plus plus/images/image-20240617181932480.png)

![image-20240617182013925](D:/c plus plus/images/image-20240617182013925.png)

### 8.2 文件存储空间的管理

* 存储空间的划分与初始化

  * 文件卷的概念
  * 目录区与文件区

  ![image-20240618001907322](D:/c plus plus/images/image-20240618001907322.png)

* 集中管理方式

  * 空闲表法
  * 空闲链表法
    * 空闲盘块链
    * 空闲盘区链

  ![image-20240618002146595](D:/c plus plus/images/image-20240618002146595.png)

  ![image-20240618002347394](D:/c plus plus/images/image-20240618002347394.png)

  ![image-20240618002415450](D:/c plus plus/images/image-20240618002415450.png)

  * 位示图法

  ![image-20240618002714727](D:/c plus plus/images/image-20240618002714727.png)

  

  * 成组链接法



## 大题

### 第三章

### 第四章



